<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>OUseful Info: Adding a Grazr Widget to a Moodle Journal Page</title>

<link rel="stylesheet" href="./styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/ouseful" />

<link rel="start" href="./" title="Home" />
<link rel="prev" href="./009237.html" title="Click On..." />

<link rel="next" href="./009267.html" title="Getting into Gaming" />


<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blogs.open.ac.uk';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>





</head>

<body>

<div id="banner">
<h1><a href="./" accesskey="1">OUseful Info</a></h1>
<span class="description"><em>Quirk. Strangeness. Charm.</em> And all in Search of OU 2.0... Exploring the potential of Web 2.0 techniques and applications in higher and distance education, informal and lifelong learning. </span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="./009237.html">&laquo; Click On...</a> |

<a href="./">Main</a>
| <a href="./009267.html">Getting into Gaming &raquo;</a>

</div>

</div>


<div class="blog">

<h2 class="date">February 02, 2007</h2>

<div class="blogbody">

<h3 class="title">Adding a Grazr Widget to a Moodle Journal Page</h3>

<p>Whilst the Moodle environment lets users add simple HTML within personal journal or blog pages, it is typically locked down to the extent that users <em>cannot</em> add javascript or iframes within the HTML; nor can users avail themselves of personally included javascript embedded within the <em>href</em> attribute of an anchor tag.</p>

<p>So here's a bookmarklet workaround, in the first instance to let you add a Grazr widget to a Moodle journal page. The hack is to add an <em>anchor</em> named in a particular way:</p>

<p><img alt="anchorHack.png" src="./anchorHack.png" width="525" height="394" border="0" /></p>

<p>When the page is saved, the URL appears in the page, but hidden in the HTML code that is used to display the text the anchor has the attribute <em>name="ousefulHack"</em></p>

<p><img alt="embedded.png" src="./embedded.png" width="287" height="127" border="0" /></p>

<p>Clicking on the bookmarklet loads a Grazr browser with the URL used to create the anchor:</p>

<p><img alt="moodlegrazr1.png" src="./moodlegrazr1.png" width="373" height="294" border="0" /></p>

<p>Grazr actually supports autodiscovery of web feeds. In the above case, I gave the URL to the OUseful blog, and Grazr has autodetected its RSS feed, allowing me to view the feed in the Grazr widget that is now embedded in the Moodle journal page:</p>

<p><img alt="moodlegrazr2.png" src="./moodlegrazr2.png" width="402" height="277" border="0" /></p>

<p>At the moment, the bookmarklet will only embed a single Grazr widget. Potential extensions to the script would include autodetection of things like YouTube URLs (in which case, a corresponding YouTube movie player could perhaps be embedded in the page rather than a Grazr widget?) as well as the embedding of all appropriately <em>name</em>d anchors present in the page.</p>

<p>If you want to try the bookmrklet out, here it is: <a href="javascript:(function(){var d=document; var i=d.getElementsByName('ousefulHack')[0];var u=i.firstChild.nodeValue;var f=d.createElement('iframe');f.width='300px';f.height='450px';f.src='http://grazr.com/gzpanel.html?file='+u;i.appendChild(f);i.removeChild(i.firstChild);})()">Moodle Grazr ousefulHack</a> (only tested in Firefox...)</p>

<p>Embedding the bookmarklet code in a Greasemonkey script or browser extension would allow Grazr widgets to be automatically embedded within Moodle journal or blog pages wherever the <em>ousefulHack</em> name is used as an  anchor attribute.</p>

<a name="more"></a>


<span class="posted">Posted by ajh59 at February  2, 2007 01:18 AM

<!--

 

-->

<br /></span>

</div>




<div class="comments-head"><a name="comments"></a>Comments</div>







</div>
</div>

<script type="text/javascript">


</script>
<script type="text/javascript">



</script>

</body>
</html>
