<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>OUseful Info: OU Traveller - Request This Book</title>

<link rel="stylesheet" href="http://blogs.open.ac.uk/Maths/ajh59/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/ouseful" />

<link rel="start" href="http://blogs.open.ac.uk/Maths/ajh59/" title="Home" />
<link rel="prev" href="http://blogs.open.ac.uk/Maths/ajh59/007181.html" title="Amazon Media Library" />

<link rel="next" href="http://blogs.open.ac.uk/Maths/ajh59/007199.html" title="Managing OPML" />


<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blogs.open.ac.uk';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>





</head>

<body>

<div id="banner">
<h1><a href="http://blogs.open.ac.uk/Maths/ajh59/" accesskey="1">OUseful Info</a></h1>
<span class="description"><em>Quirk. Strangeness. Charm.</em> And all in Search of OU 2.0... Exploring the potential of Web 2.0 techniques and applications in higher and distance education, informal and lifelong learning. </span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://blogs.open.ac.uk/Maths/ajh59/007181.html">&laquo; Amazon Media Library</a> |

<a href="http://blogs.open.ac.uk/Maths/ajh59/">Main</a>
| <a href="http://blogs.open.ac.uk/Maths/ajh59/007199.html">Managing OPML &raquo;</a>

</div>

</div>


<div class="blog">

<h2 class="date">July 03, 2006</h2>

<div class="blogbody">

<h3 class="title">OU Traveller - Request This Book</h3>

<p>I knocked up (out of other bits) a script today that adds a link to the <a href="http://blogs.open.ac.uk/Maths/ajh59/007069.html">OU Traveller panel</a> when a book is not found in the OU Library that makes it easy for the user request the book in question. Clicking the link will (almost...) fire off a request to order that book using the the Library's official request a book form.</p>

<p>Building the script has thrown up a few usability issues regarding the actual library form. (Which is why I say the form almost works; it can be made to work completely by adding user details or by making a minor change or two to the orignal form and form handler, such as putting in a confirmation screen so the user can check the details that have been submitted.)</p>

<p>[Update: another (better?) alternative might be to pop up a dialogue to allow a user to enter their personal details if they want to reserve a book? If this info could also be saved into the Amazon cookie withuot upsetting Amazon, that might be neat?]</p>

<p>As the actual library form requires user info (not provided by the Greasmonkey script) this suggests that I need to tweak the GM script so that it supports user customisation, and then I either: a) build a GM script generator that builds a personal script when provided with user details, or b) embed the script in toolbar or other FF extension that provides a user preferences dialogue.</p>

<p>The new script builds heavily on the <a href="http://blogs.open.ac.uk/Maths/ajh59/007156.html">Lookup Book Details</a> script (<a href="http://blogs.open.ac.uk/Maths/ajh59/007165.html">public demo version</a>) and can be found here: <a href="http://blogs.open.ac.uk/Maths/ajh59/ouTravellerRequest.user.js">OU Traveller Request This Book</a> Greasemonkey script.</p>

<p>The main innovation in this script is the reuse of the this test <a href="javascript:function v(n,v){el=d.createElement('input');el.type='text';el.name=n;el.value=v;f.appendChild(el);};void(d=document);void(uri='http://library.open.ac.uk/waltonhall/book/bookrequest.php');void(f=d.createElement('form'));void(f.method='post');void(f.action=uri);v('name','Hirst');v('email','a.j.hirst@open.ac.uk');v('faculty','Technology');v('dateofpub','2006');v('author','TESTING');v('itemtitle','PLEASE IGNORE');d.body.appendChild(f);f.submit();"bookmarklet</a> which mimicked the behaviour of the original <a href="http://library.open.ac.uk/waltonhall/book/bookrequest.php">request a book</a> page. (If there is interest, I can post a version of this script for the <a href="http://blogs.open.ac.uk/Maths/ajh59/007165.html">demo page</a>.)</p>

<p>What the script does is create a form element, and populate it with input fields (of type <em>text</em>) to mimic the fields in the form on the original page. The inputs are assigned values from the relevant items in an XML details page (keyed by ISBN) that is requested from the Amazon web service (returning something like this: <a href="http://webservices.amazon.co.uk/onca/xml?Service=AWSECommerceService&Version=2005-03-23&Operation=ItemLookup&ContentType=text%2Fxml&SubscriptionId=0DK8EWAWVKXSH8SEMVR2&ItemId=0849304563&ResponseGroup=Images,ItemAttributes">book details from Amazon</a> (link obtained via <a href="http://blogs.open.ac.uk/Maths/ajh59/ISBNLinks.html">ISBN Links Generator</a>)).</p>

<a name="more"></a>


<span class="posted">Posted by ajh59 at July  3, 2006 06:21 PM
<script src="http://feeds.feedburner.com/~s/ouseful?i=http://blogs.open.ac.uk/Maths/ajh59/007194.html" type="text/javascript" charset="utf-8"></script>
<!--

 

-->

<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>







</div>
</div>
<script type="text/javascript">
 z_post_title="OU Traveller - Request This Book";
 z_post_category="Library";
</script>
<script id="stats_script" type="text/javascript" src="http://metrics.performancing.com/mt.js"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-571814-1";
urchinTracker();
</script>
</body>
</html>
